---
title: "Social Network Analysis"
author: "Michaela Fricova"
date: "2023-03-28"
output: html_document
---

## #5 Community Structure in Zachary Karate Club
This project is the 5/8 part of my mini-series on social network analysis. The goal of this series is to start with the very basics of network analysis, such as with the concepts of centrality and assortativity, and progress towards more advanced topics, including Erdős-Rényi and Configuration models and Exponential family random graphs. In this fifth episode, I investigate the concepts of **community structure** and **Blockmodeling**. To do so, I will use a well known **Zachary Karate Club dataset**. This dataset was first published in 1977 by Wayne W. Zachary and later became a top social network dataset for analysing communities. Zachary collected this dataset over a period of multiple years by continuously tracking friendships between 34 members of a karate club at a US university. During the investigated time period, a dispute arose about raising of the fees which lead to the partitioning of the club into 2 parts. One club part became governed by the President, the other by the Coach. I will now analyze **what led to the splitting of the Zachary karate network**. And, more specifically, **whether community structure affected the network polarization**.

As always, I start by loading the necessary libraries. 

```{r setup, echo = FALSE, error=FALSE, warning=FALSE, message=FALSE}
library(plot.matrix)
library(igraph)
library(igraphdata)
library(intergraph)
#library(ape) 
library(Matrix) 
require(sna)
library(plyr)
library(dbplyr)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
data("karate")
summary(karate)
```

```{r pressure, echo=FALSE}
knet <- asNetwork(karate) 
blockmodel(knet,ec = knet %v% "Faction")
kbm <- blockmodel(knet,ec = knet %v% "Faction")$block.model 
g_kar <- sample_sbm(34, pref.matrix = kbm, block.sizes = c(16,18), directed = FALSE)
assortativity(g_kar, c(rep(1,16), rep(2,18))) 
par(mfrow=c(1,2))
plot(g_kar,
     vertex.color = c(rep(1,16), rep(2,18)), 
     vertex.label = NA,
     main = "Fabricated Network")
plot(karate, 
     vertex.label = NA,
     main = "Real Network")
```

```{r}
par(mfrow=c(1,2))
degree_cent_fabricated <- degree(g_kar, mode = "all")
hist(degree_cent_fabricated, 
     col = "#CD7F32",
     main = "Fabricated Network")
degree_cent_real <- degree(karate, mode = "all")
hist(degree_cent_real, 
     col = "#CD7F32",
     main = "Real Network")
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
